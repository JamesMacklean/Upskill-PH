{% extends 'base.html' %}
{% load static %}
{% block 'title' %}Program{% endblock %}
{% block content %}
<div class="application-prompt" style="display: none;">Application Submitted</div>
    {% for program in programs %}
        {% comment %} DEFAULT SA LAHAT NG PROGRAMS {% endcomment %}
        <div class="bg_{{program.id}}_image w-100">
            <div class="program-banner w-100">
                <div class="contained-wrapper h-100">
                    <div class="d-flex align-items-center h-100">
                    <div class="col d-flex flex-column">
                        <h1 class="pagebanner-title mb-3 text-left">{{ program.name }}</h1>
                            {% if program.description %}
                            <p class="pagebanner-desc mt-2">
                                {{program.description}}
                            </p>
                            {% else %}
                            <p class="pagebanner-desc mt-2">No description for this program.</p>
                            {% endif %}
                    </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-5 mt-3w-100 mt-4">
            <div class="program-partners w-100 px-5">
                <div class="program-partner-logos d-flex flex-row w-100 justify-content-center">
                    <img src="https://coursebank-static-assets-tmtg.s3.ap-northeast-1.amazonaws.com/DICT-Logo-nobg.png">
                    <img src="https://coursebank-static-assets-tmtg.s3.ap-northeast-1.amazonaws.com/ILCDB+logo_2.png">
                    <img src="https://coursebank-static-assets-tmtg.s3.ap-northeast-1.amazonaws.com/coursera-social-logo-brand.png">
                    <img src="https://coursebank-static-assets-tmtg.s3.ap-northeast-1.amazonaws.com/logo-moocsx.png">
                </div>
            </div>
        </div>
        
        {% comment %} KUNG NA-APPLYAN NA NG USER ANG PROGRAM NA ITO {% endcomment %}
        {% if program.id in applied_programs %}
            {% for user_data in user_program %}
                {% if program.id in user_data.program_id%}
                    <div class="program min-100 w-100 px-5 py-3">
                        <div class="program-about mt-4">
                            <h5 class="mb-4">About this Program</h5>
                            {% comment %} will be replaced by program.about {% endcomment %}
                            <p>
                                The <strong>Department of Information and Communications Technology (DICT) - 10</strong>, through its <strong>ICT Literacy and Competency Development Bureau (ILCDB)</strong>, also known as the training arm of the Department, is responsible for providing ICT training and capacity-building initiatives to the government workforce and ICT-enabled sectors. The ILCDB promotes and recognizes the vital role of information and communications technology in nation-building, promote digital literacy, ICT expertise, and knowledge-building among citizens to enable them to participate and compete in an evolving ICT age, and empower, through the use of ICT, the disadvantaged segments of the population, including the elderly, out-of-school youth, persons with disabilities and indigenous and minority groups.
                            </p>
                            <hr>
                        </div>
                        <div class="program-about mt-4">
                            <h5 class="mb-4">Learning Platform</h5>
                            <p>
                                <a href="https://castlms.com/" target="_blank" style="color: #000 !important;">Cast LMS</a>
                            </p>
                            <hr>
                        </div>
                        <div class="program-about mt-4">
                            <form action="" class="program-application" id="apply" method="POST">
                                {% csrf_token %}
                                <div class="rc-ProfilePhotoUploader form-horizontal">
                                    <div class="form-group horizontal-box wrap my-3 align-items-center">
                                        <div class="form-control-custom">
                                            <div class="css-1cq002f">
                                                <div class="css-ek3fxo">
                                                        {% if user_data.status == 1 %}
                                                            <a href="https://dict-lakip.upskillph.org" class="btn btn-primary">Go to Program</a>
                                                            {% comment %} <button type="submit" class="btn solid">APPLIED</button> {% endcomment %}
                                                        {% elif user_data.status == 2 %}
                                                            <button type="submit" class="btn btn-primary"disabled>WAITLISTED</button>
                                                        {% elif user_data.status == 3 %}
                                                            <button type="submit" class="btn btn-primary"disabled>REJECTED</button>
                                                        {% else %}
                                                            <button type="submit" class="btn btn-primary"disabled>PENDING</button>
                                                        {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        {% comment %} KUNG HINDI PA NA-APPLYAN NG USER ANG PROGRAM NA ITO {% endcomment %}
        {% else %}
            <div class="program min-100 w-100 px-5 py-3">
                <div class="program-about mt-4">
                    <h5 class="mb-4">About this Program</h5>
                    <p>
                        The <strong>Department of Information and Communications Technology (DICT) - 10</strong>, through its <strong>ICT Literacy and Competency Development Bureau (ILCDB)</strong>, also known as the training arm of the Department, is responsible for providing ICT training and capacity-building initiatives to the government workforce and ICT-enabled sectors. The ILCDB promotes and recognizes the vital role of information and communications technology in nation-building, promote digital literacy, ICT expertise, and knowledge-building among citizens to enable them to participate and compete in an evolving ICT age, and empower, through the use of ICT, the disadvantaged segments of the population, including the elderly, out-of-school youth, persons with disabilities and indigenous and minority groups.
                    </p>
                    <hr>
                </div>
                <div class="program-about mt-4">
                    <h5 class="mb-4">Learning Platform</h5>
                    <p>
                        <a href="https://castlms.com/" target="_blank" style="color: #000 !important;">Cast LMS</a>
                    </p>
                    <hr>
                </div>
                <div class="program-about mt-4">
                    <h5 class="mb-4">Apply to this Program</h5>
                    <form action="" class="program-application" id="apply" method="POST" onsubmit="showSubmissionPrompt()">
                        {% csrf_token %}
                        {% comment %} **************************************************************************************** {% endcomment %}
                                    {% comment %} COMMENT MUNA ITO PARA ALLOWED MAG-APPLY NG MULTIPLE PROGRAMS {% endcomment %}
                        {% comment %} {% if atleast_approved_in_a_program %}
                            <p>You cannot apply to more than 1 program</p>
                        {% endif %}                                 {% endcomment %}
                        {% comment %} **************************************************************************************** {% endcomment %}

                        {% comment %} KUNG MAGA-APPLY SIYA AT UPDATED ANG PROFILE NIYA {% endcomment %}
                        {% if user_details.first_name and user_details.last_name and user_details.email %}
                            <div class="rc-ProfilePhotoUploader form-horizontal">
                                <div class="form-group horizontal-box wrap my-3 align-items-center">
                                    <div class="form-control-custom">
                                        <div class="css-1cq002f">
                                            <div class="css-ek3fxo">
                                                <button type="submit" class="btn btn-primary" id="applyBtn">APPLY NOW</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {% comment %} Privacy Policy Modal {% endcomment %}
                            <div class="modal fade" id="privacy-modal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                                <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="privacyModalLabel">Data Privacy Policy</h5>
                                        </div>
                                        <div class="modal-body p-5">
                                            <h1 class="mb-3">Privacy Policy</h1>
                                            <p>Department of Information and Communications Technology Training Programs</p>
                        
                                            <h5 class="mb-4 mt-5">Your Privacy Is Important To Us</h5>
                                            <p>We at Coursebank, as a data controller and/or processor, is committed to protect and respect your privacy in compliance with the Data Privacy Act of 2012 in relation to all Personal and Sensitive Personal Information that we collect from you.</p>
                                            <p>For most purposes, we determine what happens to any information that we collect about you, which for all intents and purposes are related to your engagements with Coursebank – for this particular case, in relation to your application as a possible learner to training programs under the Department of Information and Communications Technology (DICT).</p>
                        
                                            <h5 class="mb-4 mt-4">What Information Do We Collect?</h5>
                                            <p>We may collect the following personal information from you when you fill out online forms as required by the Academy:</p>
                                            <ul>
                                                <li>Name</li>
                                                <li>Email</li>
                                                <li>Place of Residence</li>
                                                <li>Age</li>
                                                <li>Gender</li>
                                                <li>Highest Educational Attainment</li>
                                            </ul>
                        
                                            <h5 class="mb-4 mt-4">How Do We Use Your Information?</h5>
                                            <p>The collected personal information is utilized solely for documentation and processing purposes for the scholarship programs you are applying for under the DICT. It is only shared and processed by authorized personnel under the project appointed by Coursebank and the DICT.</p>
                                            <p>The information collected also enables the project team to monitor and assess the performance of the projects for future iterations.</p>
                        
                                            <h5 class="mb-4 mt-4">How Do We Protect And Handle Your Information</h5>
                                            <p>Coursebank strictly enforces its Privacy Policy. It has implemented technological, organizational and physical security measures to protect personal data from loss, misuse, unauthorized modification, unauthorized or accidental access or disclosure, alteration or destruction.</p>
                                            <p>Only authorized Coursebank personnel and designated DICT personnel for the scholarship programs have access to your personal information, the exchange of which will be facilitated through secured email or hard copy. They will be stored in a database for three years (after inquiries, requests are acted upon) after which digital files shall be anonymized.</p>
                        
                                            <h5 class="mb-4 mt-4">Your Rights Pertaining To Your Information</h5>
                                            <p>If you would like to exercise your rights (as listed below) to or have any concerns about our handling of your personal information and sensitive personal information, you may contact the Data Protection Officer (DPO) through the following contact details:</p>
                        
                                            <p> Data Privacy Officer | <a href="mailto:inquire@moocs.ph">inquire@moocs.ph</a></p>
                        
                                            <p>Rights you can exercise:</p>
                                            <ul>
                                                <li>request a copy of your information which you supplied to us</li>
                                                <li>request us to correct or delete your information</li>
                                                <li>object to us processing your information</li>
                                                <li>inform Coursebank of any clarification and/or complaint you have in relation to the personal information and sensitive personal information being collected, processed, shared, and/or purged</li>
                                                <li>lodge a complaint with the National Privacy Commission</li>
                                            </ul>
                                            <p class="mb-0 mt-5 text-center"> <input id="privacy-checkbox" type="checkbox"> <strong> I Agree to the Data Privacy Policy of the Program</strong></p>
                                        </div>
                                        <div class="modal-footer justify-content-center">
                                            <button type="submit" class="btn btn-primary" id="apply-button" disabled>APPLY NOW</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script src="https://unpkg.com/@popperjs/core@2"></script>
                            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
                            <script>
                                const submitButton = document.getElementById('submit-button');
                                const privacyModal = new bootstrap.Modal(document.getElementById('privacy-modal'));

                                submitButton.addEventListener('click', function() {
                                    privacyModal.show();
                                });

                                const checkbox = document.getElementById('privacy-checkbox');
                                const applyButton = document.getElementById('apply-button');

                                // Event listener to enable the 'APPLY NOW' button when the checkbox is checked
                                checkbox.addEventListener('change', function() {
                                    applyButton.disabled = !this.checked;
                                });
                            </script>
                        {% comment %} KUNG MAGA-APPLY SIYA AT HINDI UPDATED ANG PROFILE NIYA {% endcomment %}
                        {% else %}
                            <div class="rc-ProfilePhotoUploader form-horizontal">
                                <div class="form-group horizontal-box wrap my-3 align-items-center">
                                    <div class="form-control-custom" id="lc-custom">
                                        <div class="css-1cq002f">
                                            <div class="css-ek3fxo">
                                                <input type="hidden" name="program_slug" value="{{ program_slug }}">
                                                <p>You need to update your profile to apply to this Program. <br>
                                                <a href="{% url 'edit' %}">Update Profile</a>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    {% comment %} HIDDEN BUTTON {% endcomment %}
                                    {% comment %} <div class="form-control-custom">
                                        <div class="css-1cq002f">
                                            <div class="css-ek3fxo">
                                                <button type="submit" class="btn solid" id="applyBtn" disabled>APPLY NOW</button>
                                            </div>
                                        </div>
                                    </div> {% endcomment %}
                                </div>
                            </div>
                        {% endif %}
                    </form>
                </div>
            </div>
        {% endif %}
    {% endfor %}
{% endblock %}
<script>
    function showSubmissionPrompt() {
        const promptDiv = document.querySelector('.application-prompt');
        promptDiv.style.display = 'block'; // Show the div
        setTimeout(() => {
            promptDiv.style.display = 'none'; // Hide the div after 15 seconds
        }, 15000);
    }
</script>